# Digital Gateway 2.0 - 智慧商城進階功能提案

## 設計理念

> 從「被動搜尋」轉變為「主動對話」
> 從「單一平台」擴展到「全球比較」
> 從「靜態展示」進化為「動態互動」

---

## 🎯 核心場景提案

### 場景一：AI 購物顧問 (Shopping Advisor)

**概念**：用戶輸入學習目標，AI 主動推薦並解釋為什麼

```
┌─────────────────────────────────────────────────────────────┐
│  🤖 智慧購物顧問                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  用戶: "我想學 Python，預算 2000 以內，希望 3 個月內學會"    │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ AI 分析您的需求：                                       ││
│  │ ✓ 技術領域：Python 程式設計                             ││
│  │ ✓ 預算範圍：NT$ 2,000 以下                              ││
│  │ ✓ 時間限制：3 個月（約 12 週）                          ││
│  │ ✓ 推測程度：初學者（根據提問方式判斷）                   ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  🎯 為您推薦 3 門課程：                                     │
│                                                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │ 最符合預算  │ │ 最高品質    │ │ 最快完成    │           │
│  │ Python 入門 │ │ Python 全端 │ │ Python 速成 │           │
│  │ NT$ 990     │ │ NT$ 1,990   │ │ NT$ 1,590   │           │
│  │ 16週課程    │ │ 12週課程    │ │ 8週課程     │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│                                                             │
│  💡 AI 建議：考慮到您的 3 個月時限，推薦「Python 全端」，    │
│     雖然價格較高但課程密度適中，完成率也最高(87%)            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 自然語言理解用戶需求
- 推斷用戶程度和偏好
- 生成個人化推薦理由

---

### 場景二：全球課程比較器 (Global Comparison)

**概念**：用 Gemini 爬取/分析外部課程資訊，與平台內課程比較

```
┌─────────────────────────────────────────────────────────────┐
│  🌍 全球課程比較                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  比較: "Python 全端開發實戰" vs 全球熱門課程                 │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │                    [動態雷達圖]                          ││
│  │                                                         ││
│  │                     內容深度                            ││
│  │                        ▲                                ││
│  │                       /│\                               ││
│  │              更新頻率◀─┼─▶價格競爭力                    ││
│  │                       \│/                               ││
│  │                        ▼                                ││
│  │                     學習支援                            ││
│  │                                                         ││
│  │  ● 本平台課程  ○ Udemy 同類  △ Coursera 同類            ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  📊 比較結果：                                              │
│  ┌──────────────┬────────────┬───────────┬────────────┐    │
│  │              │ 本平台     │ Udemy     │ Coursera   │    │
│  ├──────────────┼────────────┼───────────┼────────────┤    │
│  │ 價格         │ NT$ 1,990  │ NT$ 2,890 │ NT$ 3,500  │    │
│  │ 時長         │ 40 小時    │ 52 小時   │ 48 小時    │    │
│  │ 語言         │ 繁體中文   │ 英文      │ 英文+字幕  │    │
│  │ 更新日期     │ 2025/12    │ 2024/08   │ 2025/01    │    │
│  │ 學員評價     │ 4.8 ⭐     │ 4.5 ⭐    │ 4.7 ⭐     │    │
│  └──────────────┴────────────┴───────────┴────────────┘    │
│                                                             │
│  🤖 AI 分析：                                               │
│  「本平台課程在價格和語言方面具有明顯優勢。Udemy 課程時長    │
│   較長但內容較舊。如果您偏好中文教學且預算有限，本平台是     │
│   最佳選擇。若需要國際認證，建議考慮 Coursera。」           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 搜尋並結構化外部課程資訊
- 跨平台特性比較分析
- 生成客觀比較報告

---

### 場景三：學習路徑規劃器 (Learning Path Planner)

**概念**：根據職涯目標，規劃多課程學習路徑

```
┌─────────────────────────────────────────────────────────────┐
│  🛤️ 學習路徑規劃                                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  職涯目標: "成為全端工程師"                                  │
│  目前程度: "會基礎 HTML/CSS"                                │
│  可用時間: "每週 10 小時"                                   │
│                                                             │
│  📍 AI 規劃的學習路徑 (預計 6 個月)：                       │
│                                                             │
│  Month 1-2        Month 3-4        Month 5-6               │
│  ┌─────────┐      ┌─────────┐      ┌─────────┐             │
│  │ 基礎階段 │ ───▶ │ 進階階段 │ ───▶ │ 實戰階段 │             │
│  └─────────┘      └─────────┘      └─────────┘             │
│       │                │                │                   │
│       ▼                ▼                ▼                   │
│  ┌─────────┐      ┌─────────┐      ┌─────────┐             │
│  │JavaScript│      │React 實戰│      │全端專案 │             │
│  │ 入門     │      │         │      │         │             │
│  │NT$ 990  │      │NT$ 1,590│      │NT$ 2,490│             │
│  └─────────┘      └─────────┘      └─────────┘             │
│       +                +                                    │
│  ┌─────────┐      ┌─────────┐                              │
│  │Python   │      │Rails API│                              │
│  │ 基礎    │      │         │                              │
│  │NT$ 990  │      │NT$ 1,590│                              │
│  └─────────┘      └─────────┘                              │
│                                                             │
│  💰 總預算估計: NT$ 7,650                                   │
│  📈 完成後預期薪資: NT$ 60,000 - 80,000/月                  │
│  🎯 ROI 分析: 約 2 個月可回本                               │
│                                                             │
│  [開始學習路徑] [調整目標] [查看其他路徑]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 職涯目標分析
- 課程前後置依賴判斷
- 學習時間估算
- ROI 計算

---

### 場景四：互動式需求探索器 (Need Explorer)

**概念**：透過對話引導用戶發現真正需求

```
┌─────────────────────────────────────────────────────────────┐
│  🔮 需求探索                                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  AI: 您好！讓我幫您找到最適合的課程。                        │
│      請問您學習的主要目的是什麼？                            │
│                                                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │ 💼 職涯發展 │ │ 🎨 興趣愛好 │ │ 🚀 創業準備 │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│                                                             │
│  [選擇: 職涯發展]                                           │
│                                                             │
│  AI: 了解！您目前的工作角色是？                              │
│                                                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │ 👨‍💻 工程師  │ │ 📊 PM/設計  │ │ 🎓 學生/轉職│           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│                                                             │
│  [選擇: 學生/轉職]                                          │
│                                                             │
│  AI: 轉職到科技業是很棒的選擇！                              │
│      您比較傾向哪個方向？                                    │
│                                                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│  │ 🎨 前端開發 │ │ ⚙️ 後端開發 │ │ 📱 App開發  │           │
│  └─────────────┘ └─────────────┘ └─────────────┘           │
│                                                             │
│  ... (持續引導，最後呈現個人化推薦)                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 動態生成問題
- 根據回答調整後續問題
- 累積上下文做最終推薦

---

### 場景五：課程預覽與試學 (Smart Preview)

**概念**：AI 摘要課程內容，提供個人化試學體驗

```
┌─────────────────────────────────────────────────────────────┐
│  📚 智慧預覽 - Python 全端開發實戰                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🤖 AI 課程摘要：                                           │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ 這門課程涵蓋 Python 從入門到全端開發的完整路徑。         ││
│  │                                                         ││
│  │ 📊 內容分布：                                           ││
│  │ ████████░░ 基礎語法 (20%)                               ││
│  │ ██████████████░░ 後端開發 (35%)                         ││
│  │ ████████████░░ 前端整合 (30%)                           ││
│  │ ██████░░ 部署上線 (15%)                                 ││
│  │                                                         ││
│  │ 🎯 適合程度：初學者 → 中級                              ││
│  │ ⏱️ 建議進度：每週 5 小時，12 週完成                      ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  💡 根據您的背景，AI 建議的學習重點：                       │
│  • 第 3-5 章：Flask 框架（您可能已熟悉，可加速）            │
│  • 第 8-10 章：資料庫設計（重點加強）                       │
│  • 第 12 章：部署（新手常見問題區）                         │
│                                                             │
│  🎬 智慧試學（免費體驗）：                                  │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ [播放器] AI 精選 3 段最具代表性的課程片段                ││
│  │                                                         ││
│  │ 1. "Hello World 到第一個 API" (5:32)                    ││
│  │ 2. "資料庫設計核心概念" (8:15)                          ││
│  │ 3. "一鍵部署到雲端" (6:48)                              ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  [立即購買 NT$ 1,990] [加入願望清單] [詢問 AI 更多問題]      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 課程大綱摘要
- 個人化學習建議
- 智慧片段選擇

---

### 場景六：動態雷達圖互動 (Interactive Radar)

**概念**：用戶可拖動權重，即時看到推薦變化

```
┌─────────────────────────────────────────────────────────────┐
│  ⚖️ 調整您的優先順序                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  拖動滑桿調整各維度權重：                                    │
│                                                             │
│  價格重要性  ████████████░░░░░░░░  60%  [-][+]              │
│  品質重要性  ██████████████░░░░░░  70%  [-][+]              │
│  速度重要性  ████████░░░░░░░░░░░░  40%  [-][+]              │
│  信譽重要性  ████████████████░░░░  80%  [-][+]              │
│  相關性      ██████████████████░░  90%  [-][+]              │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │           [即時更新的雷達圖]                             ││
│  │                                                         ││
│  │   根據您的權重，推薦順序即時變化：                       ││
│  │                                                         ││
│  │   🥇 React+TypeScript 實戰 (綜合分: 87)                 ││
│  │   🥈 JavaScript 進階精通班 (綜合分: 84)                 ││
│  │   🥉 Python 全端開發實戰 (綜合分: 81)                   ││
│  │                                                         ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  🤖 AI 觀察：                                               │
│  「您非常重視信譽和相關性，這表示您傾向選擇口碑好且符合      │
│   需求的課程。建議關注學員評價和課程更新頻率。」             │
│                                                             │
│  [重置權重] [儲存我的偏好] [查看詳細比較]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 分析用戶權重偏好
- 生成個性化洞察
- 推薦調整建議

---

### 場景七：購買決策助手 (Decision Helper)

**概念**：解決用戶的最終猶豫，給出明確建議

```
┌─────────────────────────────────────────────────────────────┐
│  🤔 還在猶豫嗎？讓 AI 幫你分析                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  您正在考慮: Python 全端開發實戰 (NT$ 1,990)                │
│                                                             │
│  請告訴 AI 您的顧慮：                                       │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ "我擔心這個課程太難，我沒有程式基礎..."                 ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  🤖 AI 分析您的顧慮：                                       │
│                                                             │
│  ❓ 您的擔心: 課程難度                                      │
│                                                             │
│  ✅ 好消息：                                                │
│  • 這門課程有 23% 的學員是零基礎起步                        │
│  • 講師特別設計了「基礎補充包」給初學者                     │
│  • 前 3 章有免費試看，您可以先評估                          │
│  • 30 天內不滿意可全額退款                                  │
│                                                             │
│  📊 同類學員數據：                                          │
│  • 零基礎學員完成率: 72%                                    │
│  • 平均學習時間: 14 週（比有基礎者多 2 週）                 │
│  • 學員評價: "講解很清楚，適合新手" (出現 47 次)            │
│                                                             │
│  💡 AI 建議：                                               │
│  「根據數據，零基礎學員也能成功完成這門課程。建議您先       │
│   試看前 3 章，如果覺得跟得上就放心購買。記得利用           │
│   30 天退款保證，降低風險。」                               │
│                                                             │
│  [試看課程] [我決定購買] [再考慮一下]                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Gemini 整合點**：
- 理解用戶顧慮
- 從課程數據中找到相關資訊
- 生成針對性的回應

---

### 場景八：學習成效追蹤 (Progress Tracker)

**概念**：購買後持續追蹤，AI 提供學習建議

```
┌─────────────────────────────────────────────────────────────┐
│  📈 您的學習儀表板                                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Python 全端開發實戰                                        │
│                                                             │
│  進度: ████████████░░░░░░░░ 60% (第 7/12 週)                │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │         [學習曲線雷達圖]                                 ││
│  │                                                         ││
│  │         理論理解                                        ││
│  │            ▲                                            ││
│  │           /│\  ← 目前能力                               ││
│  │    實作能力◀─┼─▶程式碼品質                              ││
│  │           \│/  ← 目標能力                               ││
│  │            ▼                                            ││
│  │         問題解決                                        ││
│  │                                                         ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  🤖 AI 週報：                                               │
│  • 本週學習時間: 4.5 小時（目標 5 小時，達成率 90%）        │
│  • 強項: 理論理解進步明顯 (+15%)                           │
│  • 待加強: 實作練習偏少，建議多做作業                       │
│                                                             │
│  💡 本週建議：                                              │
│  「您在第 7 章『資料庫設計』的測驗得分較低(65%)。           │
│   建議重看 7.3 節『關聯設計』並完成補充練習。」             │
│                                                             │
│  [查看詳細分析] [調整學習計畫] [聯繫講師]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🏗️ 技術架構提案

### Gemini API 整合架構

```
┌─────────────────────────────────────────────────────────────┐
│                      用戶介面層                              │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 對話介面 │ │ 雷達圖   │ │ 比較表格 │ │ 學習路徑 │       │
│  └────┬─────┘ └────┬─────┘ └────┬─────┘ └────┬─────┘       │
│       │            │            │            │              │
├───────┴────────────┴────────────┴────────────┴──────────────┤
│                     API 控制層                              │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  AIAssistantController                                  ││
│  │  • chat          → 對話式互動                           ││
│  │  • analyze       → 課程分析                             ││
│  │  • compare       → 跨平台比較                           ││
│  │  • recommend     → 個人化推薦                           ││
│  │  • plan          → 學習路徑規劃                         ││
│  └─────────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────────┤
│                     服務層                                   │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐        │
│  │ GeminiClient │ │ PromptBuilder│ │ ResponseParser│        │
│  └──────┬───────┘ └──────┬───────┘ └──────┬───────┘        │
│         │                │                │                 │
│  ┌──────┴────────────────┴────────────────┴───────┐        │
│  │              AI::ConversationManager            │        │
│  │  • 管理對話歷史                                 │        │
│  │  • 上下文累積                                   │        │
│  │  • Token 使用優化                               │        │
│  └────────────────────────────────────────────────┘        │
├─────────────────────────────────────────────────────────────┤
│                     資料層                                   │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐        │
│  │ UserPreference│ │ AIConversation│ │ ExternalCourse│       │
│  │ 用戶偏好     │ │ 對話歷史     │ │ 外部課程快取 │        │
│  └──────────────┘ └──────────────┘ └──────────────┘        │
└─────────────────────────────────────────────────────────────┘
```

### 新增 API 端點

```ruby
# config/routes.rb
namespace :api do
  namespace :v1 do
    namespace :ai do
      # 對話式 AI 助手
      post 'chat', to: 'assistant#chat'

      # 課程分析
      get 'analyze/:product_id', to: 'assistant#analyze'

      # 全球比較
      post 'compare', to: 'assistant#compare'

      # 個人化推薦
      post 'recommend', to: 'assistant#recommend'

      # 學習路徑
      post 'plan', to: 'assistant#plan'

      # 購買決策
      post 'decide', to: 'assistant#decide'
    end
  end
end
```

### Gemini API Key 管理

```ruby
# 用戶可以使用自己的 API Key（省成本）
# 或使用平台提供的（付費功能）

class User < ApplicationRecord
  # 加密儲存用戶的 API Key
  has_encrypted :gemini_api_key

  def ai_client
    key = gemini_api_key.presence || Rails.application.credentials.dig(:gemini, :api_key)
    AI::GeminiClient.new(api_key: key)
  end
end
```

---

## 🎨 UI/UX 設計原則

### 1. 漸進式揭露
- 簡單需求 → 快速推薦
- 複雜需求 → 深度對話
- 讓用戶選擇互動深度

### 2. 即時反饋
- 雷達圖即時更新
- 打字時即時分析
- 載入時顯示 AI 思考過程

### 3. 透明度
- 顯示 AI 推薦理由
- 標註資料來源
- 讓用戶理解決策依據

### 4. 信任建立
- 顯示準確率統計
- 提供人工驗證選項
- 允許回報錯誤

---

## 📊 預期效益

| 指標 | 預期提升 |
|------|----------|
| 轉換率 | +25-40% (AI 減少選擇猶豫) |
| 客單價 | +15-20% (學習路徑推薦多課程) |
| 用戶停留時間 | +50% (互動式探索) |
| 退款率 | -30% (更精準匹配需求) |
| NPS 分數 | +20 (個人化體驗) |

---

## 🚀 實施優先順序建議

### Phase 1 (2週) - 基礎對話
1. ✅ Gemini API 整合
2. ✅ 簡單問答功能
3. ✅ 課程摘要生成

### Phase 2 (2週) - 智慧推薦
4. 需求探索器
5. 個人化推薦
6. 動態雷達圖權重調整

### Phase 3 (2週) - 全球比較
7. 外部課程爬取
8. 跨平台比較
9. 價格追蹤

### Phase 4 (2週) - 進階功能
10. 學習路徑規劃
11. 購買決策助手
12. 學習成效追蹤

---

## 💡 創新亮點總結

1. **對話式購物** - 不只是搜尋，而是對話
2. **全球視野** - 不只比較平台內，還比較全球
3. **動態權重** - 用戶掌控，AI 輔助
4. **購買後延續** - 不只是成交，還有學習陪伴
5. **BYOK (Bring Your Own Key)** - 用戶自帶 API Key 省成本

---

*「最好的推薦不是告訴用戶買什麼，而是幫用戶理解自己需要什麼。」*
